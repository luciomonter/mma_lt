<<<<<<< HEAD
{"version":3,"sources":["../../src/core/login/pages/sites/sites.module.ts","../../src/core/login/pages/sites/sites.ts"],"names":[],"mappings":"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","file":"25.js","sourcesContent":["// (C) Copyright 2015 Martin Dougiamas\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { CoreLoginSitesPage } from './sites';\r\nimport { CoreDirectivesModule } from '@directives/directives.module';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        CoreLoginSitesPage,\r\n    ],\r\n    imports: [\r\n        CoreDirectivesModule,\r\n        IonicPageModule.forChild(CoreLoginSitesPage),\r\n        TranslateModule.forChild()\r\n    ],\r\n})\r\nexport class CoreLoginSitesPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/login/pages/sites/sites.module.ts","// (C) Copyright 2015 Martin Dougiamas\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { Component } from '@angular/core';\r\nimport { IonicPage } from 'ionic-angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CoreLoggerProvider } from '@providers/logger';\r\nimport { CoreSitesProvider, CoreSiteBasicInfo } from '@providers/sites';\r\nimport { CoreDomUtilsProvider } from '@providers/utils/dom';\r\nimport { CoreTextUtilsProvider } from '@providers/utils/text';\r\nimport { AddonPushNotificationsProvider } from '@addon/pushnotifications/providers/pushnotifications';\r\nimport { CoreLoginHelperProvider } from '../../providers/helper';\r\n\r\n/**\r\n * Page that displays the list of stored sites.\r\n */\r\n@IonicPage({ segment: 'core-login-sites' })\r\n@Component({\r\n    selector: 'page-core-login-sites',\r\n    templateUrl: 'sites.html',\r\n})\r\nexport class CoreLoginSitesPage {\r\n    sites: CoreSiteBasicInfo[];\r\n    showDelete: boolean;\r\n    protected logger;\r\n\r\n    constructor(private domUtils: CoreDomUtilsProvider, private textUtils: CoreTextUtilsProvider,\r\n            private sitesProvider: CoreSitesProvider, private loginHelper: CoreLoginHelperProvider, logger: CoreLoggerProvider,\r\n            private translate: TranslateService, private pushNotificationsProvider: AddonPushNotificationsProvider) {\r\n        this.logger = logger.getInstance('CoreLoginSitesPage');\r\n    }\r\n\r\n    /**\r\n     * View loaded.\r\n     */\r\n    ionViewDidLoad(): void {\r\n        this.sitesProvider.getSortedSites().then((sites) => {\r\n            // Remove protocol from the url to show more url text.\r\n            this.sites = sites.map((site) => {\r\n                site.siteUrl = site.siteUrl.replace(/^https?:\\/\\//, '');\r\n                site.badge = 0;\r\n                this.pushNotificationsProvider.getSiteCounter(site.id).then((counter) => {\r\n                    site.badge = counter;\r\n                });\r\n\r\n                return site;\r\n            });\r\n\r\n            this.showDelete = false;\r\n        }).catch(() => {\r\n            // Shouldn't happen.\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Go to the page to add a site.\r\n     */\r\n    add(): void {\r\n        this.loginHelper.goToAddSite(false, true);\r\n    }\r\n\r\n    /**\r\n     * Delete a site.\r\n     *\r\n     * @param {Event} e Click event.\r\n     * @param {number} index Position of the site.\r\n     */\r\n    deleteSite(e: Event, index: number): void {\r\n        e.stopPropagation();\r\n\r\n        const site = this.sites[index],\r\n            siteName = site.siteName;\r\n\r\n        this.textUtils.formatText(siteName).then((siteName) => {\r\n            this.domUtils.showConfirm(this.translate.instant('core.login.confirmdeletesite', { sitename: siteName })).then(() => {\r\n                this.sitesProvider.deleteSite(site.id).then(() => {\r\n                    this.sites.splice(index, 1);\r\n                    this.showDelete = false;\r\n\r\n                    // If there are no sites left, go to add site.\r\n                    this.sitesProvider.hasSites().then((hasSites) => {\r\n                        if (!hasSites) {\r\n                            this.loginHelper.goToAddSite(true, true);\r\n                        }\r\n                    });\r\n                }).catch((error) => {\r\n                    this.logger.error('Error deleting site ' + site.id, error);\r\n                    this.domUtils.showErrorModalDefault(error, 'Delete site failed.');\r\n                    this.domUtils.showErrorModal('core.login.errordeletesite', true);\r\n                });\r\n            }).catch(() => {\r\n                // User cancelled, nothing to do.\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Login in a site.\r\n     *\r\n     * @param {string} siteId The site ID.\r\n     */\r\n    login(siteId: string): void {\r\n        const modal = this.domUtils.showModalLoading();\r\n\r\n        this.sitesProvider.loadSite(siteId).then(() => {\r\n            if (!this.loginHelper.isSiteLoggedOut()) {\r\n                return this.loginHelper.goToSiteInitialPage();\r\n            }\r\n        }).catch((error) => {\r\n            this.logger.error('Error loading site ' + siteId, error);\r\n            this.domUtils.showErrorModalDefault(error, 'Error loading site.');\r\n        }).finally(() => {\r\n            modal.dismiss();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Toggle delete.\r\n     */\r\n    toggleDelete(): void {\r\n        this.showDelete = !this.showDelete;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/login/pages/sites/sites.ts"],"sourceRoot":""}
=======
{"version":3,"sources":["../../src/core/mainmenu/pages/menu/menu.module.ts","../../src/core/mainmenu/pages/menu/menu.ts"],"names":[],"mappings":"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","file":"25.js","sourcesContent":["// (C) Copyright 2015 Martin Dougiamas\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { CoreComponentsModule } from '@components/components.module';\nimport { CoreMainMenuPage } from './menu';\n\n@NgModule({\n    declarations: [\n        CoreMainMenuPage,\n    ],\n    imports: [\n        CoreComponentsModule,\n        IonicPageModule.forChild(CoreMainMenuPage),\n        TranslateModule.forChild()\n    ],\n})\nexport class CoreMainMenuPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/mainmenu/pages/menu/menu.module.ts","// (C) Copyright 2015 Martin Dougiamas\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, OnDestroy, ViewChild, ChangeDetectorRef } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { CoreSitesProvider } from '@providers/sites';\nimport { CoreEventsProvider } from '@providers/events';\nimport { CoreIonTabsComponent } from '@components/ion-tabs/ion-tabs';\nimport { CoreMainMenuProvider } from '../../providers/mainmenu';\nimport { CoreMainMenuDelegate, CoreMainMenuHandlerToDisplay } from '../../providers/delegate';\n\n/**\n * Page that displays the main menu of the app.\n */\n@IonicPage({segment: 'core-mainmenu'})\n@Component({\n    selector: 'page-core-mainmenu',\n    templateUrl: 'menu.html',\n})\nexport class CoreMainMenuPage implements OnDestroy {\n    tabs: CoreMainMenuHandlerToDisplay[] = [];\n    loaded = false;\n    redirectPage: string;\n    redirectParams: any;\n    showTabs = false;\n\n    protected subscription;\n    protected redirectObs: any;\n    protected pendingRedirect: any;\n\n    @ViewChild('mainTabs') mainTabs: CoreIonTabsComponent;\n\n    constructor(private menuDelegate: CoreMainMenuDelegate, private sitesProvider: CoreSitesProvider, navParams: NavParams,\n            private navCtrl: NavController, private eventsProvider: CoreEventsProvider, private cdr: ChangeDetectorRef) {\n\n        // Check if the menu was loaded with a redirect.\n        const redirectPage = navParams.get('redirectPage');\n        if (redirectPage) {\n            this.pendingRedirect = {\n                redirectPage: redirectPage,\n                redirectParams: navParams.get('redirectParams')\n            };\n        }\n    }\n\n    /**\n     * View loaded.\n     */\n    ionViewDidLoad(): void {\n        if (!this.sitesProvider.isLoggedIn()) {\n            this.navCtrl.setRoot('CoreLoginInitPage');\n\n            return;\n        }\n\n        this.showTabs = true;\n\n        this.redirectObs = this.eventsProvider.on(CoreEventsProvider.LOAD_PAGE_MAIN_MENU, (data) => {\n            if (!this.loaded) {\n                // View isn't ready yet, wait for it to be ready.\n                this.pendingRedirect = data;\n            } else {\n                delete this.pendingRedirect;\n                this.handleRedirect(data);\n            }\n        });\n\n        this.subscription = this.menuDelegate.getHandlers().subscribe((handlers) => {\n            // Remove the handlers that should only appear in the More menu.\n            handlers = handlers.filter((handler) => {\n                return !handler.onlyInMore;\n            });\n            handlers = handlers.slice(0, CoreMainMenuProvider.NUM_MAIN_HANDLERS); // Get main handlers.\n\n            // Re-build the list of tabs. If a handler is already in the list, use existing object to prevent re-creating the tab.\n            const newTabs = [];\n\n            for (let i = 0; i < handlers.length; i++) {\n                const handler = handlers[i];\n\n                // Check if the handler is already in the tabs list. If so, use it.\n                const tab = this.tabs.find((tab) => {\n                    return tab.title == handler.title && tab.icon == handler.icon;\n                });\n\n                newTabs.push(tab || handler);\n            }\n\n            this.tabs = newTabs;\n\n            // Sort them by priority so new handlers are in the right position.\n            this.tabs.sort((a, b) => {\n                return b.priority - a.priority;\n            });\n\n            this.loaded = this.menuDelegate.areHandlersLoaded();\n\n            if (this.loaded && this.pendingRedirect) {\n                // Wait for tabs to be initialized and then handle the redirect.\n                setTimeout(() => {\n                    if (this.pendingRedirect) {\n                        this.handleRedirect(this.pendingRedirect);\n                        delete this.pendingRedirect;\n                    }\n                });\n            }\n        });\n    }\n\n    /**\n     * Handle a redirect.\n     *\n     * @param {any} data Data received.\n     */\n    protected handleRedirect(data: any): void {\n        // Check if the redirect page is the root page of any of the tabs.\n        const i = this.tabs.findIndex((tab, i) => {\n            return tab.page == data.redirectPage;\n        });\n\n        if (i >= 0) {\n            // Tab found. Set the params.\n            this.tabs[i].pageParams = Object.assign({}, data.redirectParams);\n        } else {\n            // Tab not found, use a phantom tab.\n            this.redirectPage = data.redirectPage;\n            this.redirectParams = data.redirectParams;\n        }\n\n        // Force change detection, otherwise sometimes the tab was selected before the params were applied.\n        this.cdr.detectChanges();\n\n        setTimeout(() => {\n            // Let the tab load the params before navigating.\n            this.mainTabs.selectTabRootByIndex(i + 1);\n        });\n    }\n\n    /**\n     * Page destroyed.\n     */\n    ngOnDestroy(): void {\n        this.subscription && this.subscription.unsubscribe();\n        this.redirectObs && this.redirectObs.off();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/mainmenu/pages/menu/menu.ts"],"sourceRoot":""}
>>>>>>> 5632a65c1fdc0002876490b68e6dc6621a0dd43d
