{"version":3,"sources":["../../src/addon/axifications/pages/list/list.module.ts","../../src/addon/axifications/components/components.module.ts","../../src/addon/axifications/components/actions/actions.ts","../../src/addon/axifications/pages/list/list.ts"],"names":[],"mappings":"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","file":"6.js","sourcesContent":["// (C) Copyright 2015 Martin Dougiamas\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { CoreComponentsModule } from '@components/components.module';\r\nimport { CoreDirectivesModule } from '@directives/directives.module';\r\nimport { CorePipesModule } from '@pipes/pipes.module';\r\nimport { AddonAxificationsComponentsModule } from '../../components/components.module';\r\nimport { AddonAxificationsListPage } from './list';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        AddonAxificationsListPage,\r\n    ],\r\n    imports: [\r\n        CoreComponentsModule,\r\n        CoreDirectivesModule,\r\n        CorePipesModule,\r\n        IonicPageModule.forChild(AddonAxificationsListPage),\r\n        TranslateModule.forChild(),\r\n        AddonAxificationsComponentsModule,\r\n    ],\r\n})\r\nexport class AddonAxificationsListPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/addon/axifications/pages/list/list.module.ts","// (C) Copyright 2015 Martin Dougiamas\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { IonicModule } from 'ionic-angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { AddonAxificationsActionsComponent } from './actions/actions';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        AddonAxificationsActionsComponent\r\n    ],\r\n    imports: [\r\n        CommonModule,\r\n        IonicModule,\r\n        TranslateModule.forChild(),\r\n    ],\r\n    providers: [\r\n    ],\r\n    exports: [\r\n        AddonAxificationsActionsComponent\r\n    ],\r\n})\r\nexport class AddonAxificationsComponentsModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/addon/axifications/components/components.module.ts","// (C) Copyright 2015 Martin Dougiamas\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { Component, Input, OnInit } from '@angular/core';\r\nimport { CoreContentLinksDelegate, CoreContentLinksAction } from '@core/contentlinks/providers/delegate';\r\n\r\n/**\r\n * Component that displays the actions for a axification.\r\n */\r\n@Component({\r\n    selector: 'addon-axifications-actions',\r\n    templateUrl: 'addon-axifications-actions.html',\r\n})\r\nexport class AddonAxificationsActionsComponent implements OnInit {\r\n    @Input() contextUrl: string;\r\n    @Input() courseId: number;\r\n\r\n    actions: CoreContentLinksAction[] = [];\r\n\r\n    constructor(private contentLinksDelegate: CoreContentLinksDelegate) {}\r\n\r\n    /**\r\n     * Component being initialized.\r\n     */\r\n    ngOnInit(): void {\r\n        this.contentLinksDelegate.getActionsFor(this.contextUrl, this.courseId).then((actions) => {\r\n            this.actions = actions;\r\n        });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/addon/axifications/components/actions/actions.ts","// (C) Copyright 2015 Martin Dougiamas\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n \r\nimport { Component } from '@angular/core';\r\nimport { IonicPage, NavParams } from 'ionic-angular';\r\nimport { CoreSitesProvider } from '@providers/sites';\r\nimport { AddonAxificationsProvider } from '../../providers/axifications';\r\n\r\n/// Lucio for different WS\r\nimport { HttpParams, HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { HttpErrorResponse, HttpResponse } from '@angular/common/http';\r\nimport { Observable, throwError } from 'rxjs';\r\nimport { catchError, retry } from 'rxjs/operators';\r\n\r\n\r\n/**\r\n * Page that displays the list of axifications.\r\n */\r\n@IonicPage({ segment: 'addon-axifications-list' })\r\n@Component({\r\n    selector: 'page-addon-axifications-list',\r\n    templateUrl: 'list.html'\r\n})\r\nexport class AddonAxificationsListPage {\r\n\thideUntil = false;\r\n    axifications = [];\r\n    axificationsLoaded = false;\r\n    canLoadMore = false;\r\n    canMarkAllAxificationsAsRead = false;\r\n    loadingMarkAllAxificationsAsRead = false;\r\n\tsafeLoginUrl: string;\r\n\r\n    protected readCount = 0;\r\n    protected unreadCount = 0;\r\n\r\n    constructor(\r\n\t\t\tnavParams: NavParams, \r\n\t\t\tprivate _http: HttpClient,\r\n            private sitesProvider: CoreSitesProvider,\t\t\t\r\n\t\t\tprivate axificationsProvider: AddonAxificationsProvider) \r\n\t{\r\n\t\t\t\r\n    }\r\n  \r\n    /** \r\n     * View loaded.\r\n     */\r\n    ionViewDidLoad(): void { \r\n\r\n\t\tvar site = this.sitesProvider.getCurrentSite()\r\n\r\n\t\t// Get username and fullname.  \r\n\t\t/// BCC SVIL: \r\n\t\tvar AUTH_USER_KEY_wsToken = \"8c98e14eef68957f1aacb7451388b4e2\";   \r\n\t\t/// BCC TEST: \r\n\t\t//var AUTH_USER_KEY_wsToken = \"eb15b5da943a5546296e027bee29f1b1\"; \r\n\t\t/// BCC PROD:  \r\n\t\t//var AUTH_USER_KEY_wsToken = \"6c7eb64adb7bbcadbedf13dbdd85ae99\"; \r\n\t\t\r\n\t\tvar userId =  site.getUserId();\r\n\t\tvar fullName = site.getInfo().fullname;\r\n\t\tvar userName = site.getInfo().username;\r\n\t\tvar siteUrl = site.getURL();\r\n\r\n\t\tvar wantsURL = siteUrl + \"/local/axperformance/splash.php\";\r\n\t\tvar functionOnWS = 'auth_userkey_request_login_url';\r\n\t\t\r\n\t\t//var responseFromWs = this.getMyLoginUrl(userName,wantsURL,AUTH_USER_KEY_wsToken,siteUrl,functionOnWS);\r\n\t\t\r\n\t\tthis.getMyLoginUrl(userName,wantsURL,AUTH_USER_KEY_wsToken,siteUrl,functionOnWS)\r\n        .subscribe(resp => {\r\n\t\t\tthis.safeLoginUrl = resp.loginurl + '&wantsurl=' + encodeURI(wantsURL);\r\n\t\t\tthis.hideUntil = true; \r\n        });\t\r\n\t\t\r\n\t\t/// binding to bottom menu\r\n\t\t/*\r\n\t\tjQuery(\"a.tab-button\").click(function() {\r\n\t\t\tconsole.log(\"change TAB\");\r\n\t\t\t\r\n\t\t\tif( !(jQuery(\"ion-header.header\").is(':visible') )){\r\n\t\t\t\tjQuery(\"ion-header.header\").show('slide', { direction: \"up\" }, 500, function() {\r\n\t\t\t\t\t$(\"div.scroll-content\").css(\"margin-top\",\"51px\");\r\n\t\t\t\t});\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t});\r\n\t\t*/\t\t\r\n\t\t\r\n    }\r\n\r\n\tgetMyLoginUrl(usernameToLogin,wantsUrl,wsToken,moodleDomain,functionNameOnWS): void {\r\n\t\tvar serverUrl = moodleDomain + '/webservice/rest/server.php' + '?wstoken=' + wsToken + '&wsfunction=' + functionNameOnWS + '&moodlewsrestformat=json';\r\n\t\t\r\n\t\t// console.log( \"ax jQuery ready1!\" );\r\n\t\tconst userToWs = {\tuser:{username:usernameToLogin} }\r\n\t\t\r\n\t\treturn this._http.post(serverUrl,\r\n            userToWs,\r\n\t\t\t\t{\r\n\t\t\t\t  headers: new HttpHeaders()\r\n\t\t\t\t\t.set('Content-Type', 'application/x-www-form-urlencoded')\r\n\t\t\t\t}\r\n\t\t\t)\r\n        .pipe(\r\n\t\t\tcatchError(this.handleError) // then handle the error\r\n\t\t);\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t/*\r\n\t\t/// INTERNAL APP APPROACH\r\n\t\tvar site = this.sitesProvider.getCurrentSite()\r\n\t    const preSets = {\r\n            getFromCache: false,\r\n\t\t\twstoken:wsToken,\r\n            saveToCache: false\r\n        };\r\n\t\tvar siteResponse = site.read(functionNameOnWS, userToWs, preSets);\r\n\t\t*/\r\n\t\t\r\n\t\t/*\r\n\t\t/// JQUERY APPROACH\r\n\t\tvar wantsUrltoAdd = '&wantsurl=' + encodeURI(wantsUrl);\r\n\t\tvar bindToApp = this;\r\n\t\tjQuery.post( serverUrl, \"user[username]=\"+usernameToLogin)\r\n\t\t  .done(function( data ) {\r\n\t\t\t//alert( \"Data Loaded: \" + data );\r\n\t\t\tconsole.log(data.loginurl);\r\n\t\t\tloginUrl = data.loginurl + wantsUrltoAdd;\t\t\r\n\t\t\tbindToApp.afterDirectLoginUrlObtained(loginUrl);\r\n\t\t});\r\n\t\t*/ \r\n\t\t\r\n\t}\t\r\n\t\r\n\t\r\n  private handleError(error: HttpErrorResponse) {\r\n    if (error.error instanceof ErrorEvent) {\r\n      // A client-side or network error occurred. Handle it accordingly.\r\n      console.error('An error occurred:', error.error.message);\r\n    } else {\r\n      // The backend returned an unsuccessful response code.\r\n      // The response body may contain clues as to what went wrong,\r\n      console.error(\r\n        `Backend returned code ${error.status}, ` +\r\n        `body was: ${error.error}`);\r\n    }\r\n    // return an observable with a user-facing error message\r\n    return throwError(\r\n      'Something bad happened; please try again later.');\r\n  }\r\n\r\n\r\n  \r\n\t/*\r\n\tafterDirectLoginUrlObtained(loginUrl): void {\r\n\t\t// console.log(\"goo:: \" + loginUrl);\r\n\t\t//this.currentLoginUrl = loginUrl;\r\n\t\t\r\n\t\t\r\n\t\t//jQuery(\"#embeded_iframe\").attr(\"src\",loginUrl);\r\n\t\t\r\n\t\t\r\n\t}\t\r\n\t*/\r\n    \r\n    /**\r\n     * Refresh axifications.\r\n     *\r\n     * @param {any} [refresher] Refresher.\r\n     */\r\n    refreshAxifications(refresher?: any): void {\r\n\t\r\n\t\t// console.log(\"refreshAxifications\");\r\n\t\t\r\n\r\n\t\t\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * Page destroyed.\r\n     */\r\n    ngOnDestroy(): void {\r\n\t\t/*\r\n        this.cronObserver && this.cronObserver.off();\r\n        this.pushObserver && this.pushObserver.unsubscribe();\r\n\t\t*/\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/addon/axifications/pages/list/list.ts"],"sourceRoot":""}